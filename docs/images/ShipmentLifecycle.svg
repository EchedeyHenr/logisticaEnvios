<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="728px" preserveAspectRatio="none" style="width:922px;height:728px;background:#FFFFFF;" version="1.1" viewBox="0 0 922 728" width="922px" zoomAndPan="magnify"><title>Shipment Lifecycle - Layered Architecture</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="332.001" x="291.4863" y="27.9951">Shipment Lifecycle - Layered Architecture</text><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="User" id="part1-lifeline"><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="529.2578" width="8" x="19.9551" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="118.5938" y2="647.8516"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Presentation" id="part2-lifeline"><g><title>Presentation</title><rect fill="#000000" fill-opacity="0.00000" height="529.2578" width="8" x="233.5723" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="237.3335" x2="237.3335" y1="118.5938" y2="647.8516"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Application" id="part3-lifeline"><g><title>Application</title><rect fill="#000000" fill-opacity="0.00000" height="529.2578" width="8" x="504.4644" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="507.5571" x2="507.5571" y1="118.5938" y2="647.8516"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="Domain" id="part4-lifeline"><g><title>Domain</title><rect fill="#000000" fill-opacity="0.00000" height="529.2578" width="8" x="683.7915" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="687.7549" x2="687.7549" y1="118.5938" y2="647.8516"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="Infrastructure" id="part5-lifeline"><g><title>Infrastructure</title><rect fill="#000000" fill-opacity="0.00000" height="529.2578" width="8" x="823.4009" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="826.8281" x2="826.8281" y1="118.5938" y2="647.8516"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="User" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="115.292">User</text><ellipse cx="23.9551" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,58.7969 L23.9551,85.7969 M10.9551,66.7969 L36.9551,66.7969 M23.9551,85.7969 L10.9551,100.7969 M23.9551,85.7969 L36.9551,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="User" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="659.8467">User</text><ellipse cx="23.9551" cy="671.6484" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,679.6484 L23.9551,706.6484 M10.9551,687.6484 L36.9551,687.6484 M23.9551,706.6484 L10.9551,721.6484 M23.9551,706.6484 L36.9551,721.6484" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Presentation" id="part2-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4775" x="186.3335" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4775" x="193.3335" y="90.9951">Presentation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.3623" x="212.8911" y="107.292">(Menu)</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Presentation" id="part2-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4775" x="186.3335" y="646.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4775" x="193.3335" y="666.8467">Presentation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.3623" x="212.8911" y="683.1436">(Menu)</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Application" id="part3-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.8145" x="436.5571" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.2236" x="469.3525" y="90.9951">Application</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.8145" x="443.5571" y="107.292">(ShipmentService)</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Application" id="part3-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.8145" x="436.5571" y="646.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.2236" x="469.3525" y="666.8467">Application</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.8145" x="443.5571" y="683.1436">(ShipmentService)</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="Domain" id="part4-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.0732" x="641.7549" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.3252" x="660.6289" y="90.9951">Domain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.0732" x="648.7549" y="107.292">(Shipment)</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="Domain" id="part4-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.0732" x="641.7549" y="646.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.3252" x="660.6289" y="666.8467">Domain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.0732" x="648.7549" y="683.1436">(Shipment)</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="Infrastructure" id="part5-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167.1455" x="743.8281" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1064" x="779.3477" y="90.9951">Infrastructure</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153.1455" x="750.8281" y="107.292">(ShipmentRepository)</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="Infrastructure" id="part5-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167.1455" x="743.8281" y="646.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1064" x="779.3477" y="666.8467">Infrastructure</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153.1455" x="750.8281" y="683.1436">(ShipmentRepository)</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="225.5723,145.7266,235.5723,149.7266,225.5723,153.7266,229.5723,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="231.5723" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.6172" x="30.9551" y="144.6606">Create shipment (input data)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="496.4644,174.8594,506.4644,178.8594,496.4644,182.8594,500.4644,178.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="237.5723" x2="502.4644" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.9341" x="244.5723" y="173.7935">createShipment(command)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg3"><polygon fill="#181818" points="675.7915,203.9922,685.7915,207.9922,675.7915,211.9922,679.7915,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="508.4644" x2="681.7915" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.0874" x="515.4644" y="202.9263">validate business rules</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="519.4644,233.125,509.4644,237.125,519.4644,241.125,515.4644,237.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="513.4644" x2="686.7915" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.0786" x="525.4644" y="232.0591">shipment instance</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg5"><polygon fill="#181818" points="815.4009,262.2578,825.4009,266.2578,815.4009,270.2578,819.4009,266.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="508.4644" x2="821.4009" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.4482" x="515.4644" y="261.1919">save(shipment)</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg6"><polygon fill="#181818" points="519.4644,291.3906,509.4644,295.3906,519.4644,299.3906,515.4644,295.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="513.4644" x2="826.4009" y1="295.3906" y2="295.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.106" x="525.4644" y="290.3247">shipment persisted</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg7"><polygon fill="#181818" points="248.5723,320.5234,238.5723,324.5234,248.5723,328.5234,244.5723,324.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="242.5723" x2="507.4644" y1="324.5234" y2="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.9004" x="254.5723" y="319.4575">confirmation / shipment ID</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg8"><polygon fill="#181818" points="34.9551,349.6563,24.9551,353.6563,34.9551,357.6563,30.9551,353.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="28.9551" x2="236.5723" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.1147" x="40.9551" y="348.5903">Display result</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="915.9736" x="0" y="382.2227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="915.9736" y1="382.2227" y2="382.2227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="915.9736" y1="385.2227" y2="385.2227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="157.6348" x="379.1694" y="371.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="139.1089" x="385.1694" y="387.7231">Shipment Lifecycle</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg9"><polygon fill="#181818" points="225.5723,421.9219,235.5723,425.9219,225.5723,429.9219,229.5723,425.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="231.5723" y1="425.9219" y2="425.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.165" x="30.9551" y="420.856">Update shipment status</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg10"><polygon fill="#181818" points="496.4644,451.0547,506.4644,455.0547,496.4644,459.0547,500.4644,455.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="237.5723" x2="502.4644" y1="455.0547" y2="455.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246.8921" x="244.5723" y="449.9888">updateStatus(shipmentId, newStatus)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg11"><polygon fill="#181818" points="675.7915,480.1875,685.7915,484.1875,675.7915,488.1875,679.7915,484.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="508.4644" x2="681.7915" y1="484.1875" y2="484.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3271" x="515.4644" y="479.1216">validate state transition</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg12"><polygon fill="#181818" points="519.4644,509.3203,509.4644,513.3203,519.4644,517.3203,515.4644,513.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="513.4644" x2="686.7915" y1="513.3203" y2="513.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.0923" x="525.4644" y="508.2544">transition allowed</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg13"><polygon fill="#181818" points="815.4009,538.4531,825.4009,542.4531,815.4009,546.4531,819.4009,542.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="508.4644" x2="821.4009" y1="542.4531" y2="542.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.8223" x="515.4644" y="537.3872">update(shipment)</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg14"><polygon fill="#181818" points="519.4644,567.5859,509.4644,571.5859,519.4644,575.5859,515.4644,571.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="513.4644" x2="826.4009" y1="571.5859" y2="571.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.063" x="525.4644" y="566.52">shipment updated</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg15"><polygon fill="#181818" points="248.5723,596.7188,238.5723,600.7188,248.5723,604.7188,244.5723,600.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="242.5723" x2="507.4644" y1="600.7188" y2="600.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.1348" x="254.5723" y="595.6528">updated status</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg16"><polygon fill="#181818" points="34.9551,625.8516,24.9551,629.8516,34.9551,633.8516,30.9551,629.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="28.9551" x2="236.5723" y1="629.8516" y2="629.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1475" x="40.9551" y="624.7856">Show shipment state</text></g><?plantuml-src dP9FQm8n4CNl-HH3JojKUXSiIBq85ah5Mo_Jx8W3kzcGJ1I_VRCRLpV-gQN79E-NoNilmb8HhBPiQp82IzwGFkYuDOOb7iXH2JEdjooa9JXI2hKq3jQUdBBeX3LRZE3JXoCVRq3XndoPufrC63q1UXWUvCZCsefrJ_HlM97RiQO43oGvEszgv26Mz6axboxCng4N5pe70-IJRECvsZaaE1SgrPg4yMlc02RmvWY5mFUP5Mni42XHSAGoRMG71YAgExIVN-Ychj6K8wM6iaWb6n7OOSLbE-qxU3RaFRXGaLT7mVXgmkbLRBoWqNHrT-woHN17HS-DrCNvBoCiESzUgBoOSHsPRio6NPsMB-SR5lEBm2BQfJw1ENjRuG7YSQX4gUdqrY-TJk_MjBPbLbECGu9_K53ee5KdFMMoA9_1q3xj_gMiTXI1E3JnUxLVzsvTPmrWLJNxgonlz9NU-A_64lguhwFkTcRdZbRRPfy7J3y0?></g></svg>